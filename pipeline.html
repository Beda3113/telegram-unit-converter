<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Трубопроводы калькулятор | Газпром</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="container">
        <header class="module-header">
            <button class="back-btn" onclick="goBack()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h1><i class="fas fa-pipe"></i> Трубопроводы калькулятор</h1>
            <div class="module-info">
                <span class="badge">СТО 2-3.5-051</span>
                <span class="badge">МГ расчеты</span>
            </div>
        </header>

        <div class="pipeline-tabs">
            <button class="pipeline-tab active" onclick="openPipelineTab('parameters')">
                <i class="fas fa-calculator"></i> Параметры
            </button>
            <button class="pipeline-tab" onclick="openPipelineTab('capacity')">
                <i class="fas fa-wind"></i> Пропускная способность
            </button>
            <button class="pipeline-tab" onclick="openPipelineTab('leaks')">
                <i class="fas fa-tint"></i> Утечки
            </button>
            <button class="pipeline-tab" onclick="openPipelineTab('operations')">
                <i class="fas fa-tools"></i> Операции
            </button>
            <button class="pipeline-tab" onclick="openPipelineTab('inventory')">
                <i class="fas fa-box"></i> Запас газа
            </button>
        </div>

        <div class="module-content">
            <!-- Вкладка параметров -->
            <div id="pipeline-parameters" class="tab-content active">
                <h2><i class="fas fa-calculator"></i> Расчет параметров газопровода</h2>
                
                <div class="pipeline-inputs">
                    <div class="input-section">
                        <h3><i class="fas fa-ruler"></i> Геометрические параметры</h3>
                        
                        <div class="input-group">
                            <label for="pipe-diameter">
                                <i class="fas fa-circle"></i> Наружный диаметр, мм
                            </label>
                            <div class="input-with-presets">
                                <input type="number" id="pipe-diameter" value="720" step="1">
                                <div class="presets">
                                    <button class="preset-btn" data-value="325">325</button>
                                    <button class="preset-btn" data-value="530">530</button>
                                    <button class="preset-btn active" data-value="720">720</button>
                                    <button class="preset-btn" data-value="1020">1020</button>
                                    <button class="preset-btn" data-value="1420">1420</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="input-group">
                            <label for="pipe-thickness">
                                <i class="fas fa-ruler-combined"></i> Толщина стенки, мм
                            </label>
                            <input type="number" id="pipe-thickness" value="10" step="0.1">
                            <div class="input-hint">
                                Стандартные: 8, 10, 12, 14, 16 мм
                            </div>
                        </div>
                        
                        <div class="input-group">
                            <label for="pipe-length">
                                <i class="fas fa-road"></i> Длина участка, км
                            </label>
                            <input type="number" id="pipe-length" value="25" step="0.1">
                        </div>
                        
                        <div class="input-group">
                            <label for="pipe-roughness">
                                <i class="fas fa-mountain"></i> Шероховатость, мм
                            </label>
                            <input type="number" id="pipe-roughness" value="0.1" step="0.01">
                            <div class="input-hint">
                                Новые трубы: 0.01-0.05 мм<br>
                                Старые трубы: 0.1-0.3 мм
                            </div>
                        </div>
                    </div>
                    
                    <div class="input-section">
                        <h3><i class="fas fa-tachometer-alt"></i> Гидравлические параметры</h3>
                        
                        <div class="input-group">
                            <label for="pressure-start">
                                <i class="fas fa-arrow-right"></i> Начальное давление, МПа
                            </label>
                            <input type="number" id="pressure-start" value="7.5" step="0.1">
                        </div>
                        
                        <div class="input-group">
                            <label for="pressure-end">
                                <i class="fas fa-arrow-left"></i> Конечное давление, МПа
                            </label>
                            <input type="number" id="pressure-end" value="4.0" step="0.1">
                            <button class="btn-small" onclick="calculateFinalPressure()">
                                Рассчитать
                            </button>
                        </div>
                        
                        <div class="input-group">
                            <label for="flow-rate">
                                <i class="fas fa-wind"></i> Расход газа, тыс.м³/ч
                            </label>
                            <input type="number" id="flow-rate" value="40" step="1">
                        </div>
                        
                        <div class="input-group">
                            <label for="gas-temperature">
                                <i class="fas fa-thermometer-half"></i> Температура газа, К
                            </label>
                            <input type="number" id="gas-temperature" value="293" step="0.1">
                            <div class="temp-display">
                                <span id="temp-display-c">20 °C</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="input-section">
                        <h3><i class="fas fa-cogs"></i> Параметры газа</h3>
                        
                        <div class="input-group">
                            <label for="gas-composition">
                                <i class="fas fa-flask"></i> Состав газа
                            </label>
                            <select id="gas-composition">
                                <option value="typical">Типовой (CH₄: 95%, C₂H₆: 3%, N₂: 2%)</option>
                                <option value="rich">Богатый (высокое содержание C₂+)</option>
                                <option value="dry">Сухой (в основном CH₄)</option>
                                <option value="high_n2">С высоким содержанием N₂</option>
                                <option value="custom">Задать вручную</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label for="gas-density">
                                <i class="fas fa-weight"></i> Плотность (н.у.), кг/м³
                            </label>
                            <input type="number" id="gas-density" value="0.75" step="0.01">
                        </div>
                        
                        <div class="input-group">
                            <label for="compressibility">
                                <i class="fas fa-compress"></i> Коэффициент сжимаемости
                            </label>
                            <input type="number" id="compressibility" value="0.95" step="0.01">
                            <button class="btn-small" onclick="calculateCompressibility()">
                                Рассчитать по ГОСТ
                            </button>
                        </div>
                        
                        <div class="input-group">
                            <label for="viscosity">
                                <i class="fas fa-tint"></i> Динамическая вязкость, мкПа·с
                            </label>
                            <input type="number" id="viscosity" value="11.2" step="0.1">
                        </div>
                    </div>
                </div>
                
                <button class="btn calculate-btn large" onclick="calculatePipelineParameters()">
                    <i class="fas fa-calculator"></i> Рассчитать все параметры
                </button>
                
                <div class="results-panel">
                    <div class="result-card">
                        <h4><i class="fas fa-arrows-alt-v"></i> Геометрический объем</h4>
                        <div class="result-value-large" id="pipe-volume">0 м³</div>
                        <p>Внутренний объем участка</p>
                    </div>
                    
                    <div class="result-card">
                        <h4><i class="fas fa-tachometer-alt"></i> Среднее давление</h4>
                        <div class="result-value-large" id="avg-pressure">0 МПа</div>
                        <p>По длине газопровода</p>
                    </div>
                    
                    <div class="result-card">
                        <h4><i class="fas fa-wind"></i> Скорость газа</h4>
                        <div class="result-value-large" id="gas-velocity">0 м/с</div>
                        <p>Линейная скорость потока</p>
                    </div>
                    
                    <div class="result-card">
                        <h4><i class="fas fa-balance-scale"></i> Запас газа</h4>
                        <div class="result-value-large" id="gas-inventory">0 тыс.м³</div>
                        <p>В участке при рабочих условиях</p>
                    </div>
                </div>
                
                <div class="detailed-results">
                    <h3><i class="fas fa-chart-line"></i> Детальные результаты</h3>
                    <div class="results-grid">
                        <div class="result-item">
                            <span>Внутренний диаметр:</span>
                            <span id="inner-diameter">700 мм</span>
                        </div>
                        <div class="result-item">
                            <span>Площадь сечения:</span>
                            <span id="cross-area">0.385 м²</span>
                        </div>
                        <div class="result-item">
                            <span>Число Рейнольдса:</span>
                            <span id="reynolds-number">0</span>
                        </div>
                        <div class="result-item">
                            <span>Коэффициент гидравлич. сопротивления:</span>
                            <span id="lambda-coef">0.012</span>
                        </div>
                        <div class="result-item">
                            <span>Перепад давления:</span>
                            <span id="pressure-drop">3.5 МПа</span>
                        </div>
                        <div class="result-item">
                            <span>Удельные потери:</span>
                            <span id="specific-losses">140 кПа/км</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Вкладка пропускной способности -->
            <div id="pipeline-capacity" class="tab-content">
                <h2><i class="fas fa-wind"></i> Пропускная способность газопровода</h2>
                
                <div class="capacity-methods">
                    <h3>Выберите метод расчета:</h3>
                    <div class="method-selector">
                        <button class="method-btn active" data-method="sto">
                            <i class="fas fa-book"></i>
                            <span>СТО Газпром</span>
                        </button>
                        <button class="method-btn" data-method="iso">
                            <i class="fas fa-globe"></i>
                            <span>ISO 5167</span>
                        </button>
                        <button class="method-btn" data-method="vniigaz">
                            <i class="fas fa-flask"></i>
                            <span>ВНИИГАЗ</span>
                        </button>
                        <button class="method-btn" data-method="panhandle">
                            <i class="fas fa-route"></i>
                            <span>Panhandle A/B</span>
                        </button>
                    </div>
                </div>
                
                <div class="capacity-form">
                    <div class="input-card">
                        <h4><i class="fas fa-sliders-h"></i> Исходные параметры</h4>
                        
                        <div class="input-group">
                            <label>Диаметр газопровода, мм:</label>
                            <input type="number" id="capacity-diameter" value="720" step="1">
                        </div>
                        
                        <div class="input-group">
                            <label>Длина участка, км:</label>
                            <input type="number" id="capacity-length" value="25" step="0.1">
                        </div>
                        
                        <div class="input-group">
                            <label>Начальное давление, МПа:</label>
                            <input type="number" id="capacity-p1" value="7.5" step="0.1">
                        </div>
                        
                        <div class="input-group">
                            <label>Конечное давление, МПа:</label>
                            <input type="number" id="capacity-p2" value="4.0" step="0.1">
                            <div class="input-hint">
                                Для расчета максимальной пропускной способности установите минимально допустимое конечное давление
                            </div>
                        </div>
                    </div>
                    
                    <div class="input-card">
                        <h4><i class="fas fa-cogs"></i> Параметры газа и труб</h4>
                        
                        <div class="input-group">
                            <label>Температура газа, К:</label>
                            <input type="number" id="capacity-temp" value="293" step="0.1">
                        </div>
                        
                        <div class="input-group">
                            <label>Коэффициент сжимаемости:</label>
                            <input type="number" id="capacity-z" value="0.95" step="0.01">
                        </div>
                        
                        <div class="input-group">
                            <label>Плотность газа (н.у.), кг/м³:</label>
                            <input type="number" id="capacity-density" value="0.75" step="0.01">
                        </div>
                        
                        <div class="input-group">
                            <label>Абсолютная шероховатость, м:</label>
                            <input type="number" id="capacity-roughness" value="0.0001" step="0.00001">
                        </div>
                    </div>
                </div>
                
                <button class="btn calculate-btn large" onclick="calculatePipelineCapacity()">
                    <i class="fas fa-calculator"></i> Рассчитать пропускную способность
                </button>
                
                <div class="capacity-results">
                    <div class="result-card large">
                        <h4><i class="fas fa-wind"></i> Пропускная способность</h4>
                        <div class="result-value-extra" id="capacity-result">0</div>
                        <div class="result-unit">млн м³/сут</div>
                        <div class="result-comparison">
                            <span>По СТО Газпром:</span>
                            <span id="capacity-sto">0</span>
                            <span>По ВНИИГАЗ:</span>
                            <span id="capacity-vniigaz">0</span>
                        </div>
                    </div>
                    
                    <div class="capacity-details">
                        <h4><i class="fas fa-info-circle"></i> Детали расчета</h4>
                        <div class="details-grid">
                            <div class="detail-item">
                                <span>Число Рейнольдса:</span>
                                <span id="detail-reynolds">0</span>
                            </div>
                            <div class="detail-item">
                                <span>Режим течения:</span>
                                <span id="detail-flow-regime">-</span>
                            </div>
                            <div class="detail-item">
                                <span>Коэфф. гидравл. сопротивления:</span>
                                <span id="detail-lambda">0</span>
                            </div>
                            <div class="detail-item">
                                <span>Скорость газа:</span>
                                <span id="detail-velocity">0 м/с</span>
                            </div>
                            <div class="detail-item">
                                <span>Перепад давления:</span>
                                <span id="detail-pressure-drop">0 МПа</span>
                            </div>
                            <div class="detail-item">
                                <span>Удельные потери:</span>
                                <span id="detail-specific-loss">0 кПа/км</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="optimization-tips">
                        <h4><i class="fas fa-lightbulb"></i> Рекомендации по увеличению пропускной способности</h4>
                        <ul>
                            <li>Повышение рабочего давления</li>
                            <li>Снижение температуры транспортируемого газа</li>
                            <li>Установка дополнительных КС</li>
                            <li>Очистка внутренней поверхности труб</li>
                            <li>Применение газовых депрессантов</li>
                        </ul>
                    </div>
                </div>
                
                <div class="capacity-chart">
                    <h4><i class="fas fa-chart-line"></i> Зависимость пропускной способности от давления</h4>
                    <div class="chart-container">
                        <canvas id="capacityChart"></canvas>
                    </div>
                    <div class="chart-controls">
                        <button class="btn-small" onclick="updateCapacityChart()">
                            <i class="fas fa-redo"></i> Обновить график
                        </button>
                        <button class="btn-small" onclick="exportCapacityChart()">
                            <i class="fas fa-download"></i> Экспорт
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Вкладка утечек -->
            <div id="pipeline-leaks" class="tab-content">
                <h2><i class="fas fa-tint"></i> Расчет утечек газа</h2>
                
                <div class="leak-types">
                    <h3>Типы утечек:</h3>
                    <div class="leak-type-selector">
                        <button class="leak-type-btn active" data-type="hole">
                            <i class="fas fa-circle"></i>
                            <span>Отверстие (свищ)</span>
                        </button>
                        <button class="leak-type-btn" data-type="crack">
                            <i class="fas fa-bolt"></i>
                            <span>Трещина</span>
                        </button>
                        <button class="leak-type-btn" data-type="flange">
                            <i class="fas fa-compress-arrows-alt"></i>
                            <span>Фланцевое соединение</span>
                        </button>
                        <button class="leak-type-btn" data-type="valve">
                            <i class="fas fa-faucet"></i>
                            <span>Протечка арматуры</span>
                        </button>
                        <button class="leak-type-btn" data-type="corrosion">
                            <i class="fas fa-rust"></i>
                            <span>Коррозия</span>
                        </button>
                    </div>
                </div>
                
                <div class="leak-form">
                    <div class="input-section">
                        <h4><i class="fas fa-tachometer-alt"></i> Параметры газопровода</h4>
                        
                        <div class="input-group">
                            <label>Давление в газопроводе, МПа:</label>
                            <input type="number" id="leak-pressure" value="5.0" step="0.1">
                        </div>
                        
                        <div class="input-group">
                            <label>Температура газа, К:</label>
                            <input type="number" id="leak-temperature" value="293" step="0.1">
                        </div>
                        
                        <div class="input-group">
                            <label>Коэффициент сжимаемости:</label>
                            <input type="number" id="leak-z" value="0.95" step="0.01">
                        </div>
                        
                        <div class="input-group">
                            <label>Плотность газа (н.у.), кг/м³:</label>
                            <input type="number" id="leak-density" value="0.75" step="0.01">
                        </div>
                    </div>
                    
                    <div class="input-section">
                        <h4><i class="fas fa-ruler"></i> Параметры утечки</h4>
                        
                        <div class="input-group">
                            <label>Диаметр отверстия, мм:</label>
                            <input type="number" id="leak-diameter" value="5" step="0.1">
                            <div class="input-hint">
                                Для трещины: ширина × длина
                            </div>
                        </div>
                        
                        <div class="input-group">
                            <label>Коэффициент истечения:</label>
                            <input type="number" id="leak-coefficient" value="0.62" step="0.01">
                            <div class="input-hint">
                                Для круглого отверстия: 0.62<br>
                                Для трещины: 0.45-0.55
                            </div>
                        </div>
                        
                        <div class="input-group">
                            <label>Показатель адиабаты (k):</label>
                            <input type="number" id="leak-k" value="1.3" step="0.01">
                            <div class="input-hint">
                                Для природного газа: 1.3-1.4
                            </div>
                        </div>
                        
                        <div class="input-group">
                            <label>Атмосферное давление, МПа:</label>
                            <input type="number" id="leak-atm-pressure" value="0.101325" step="0.001">
                        </div>
                    </div>
                </div>
                
                <div class="leak-calc-controls">
                    <button class="btn calculate-btn" onclick="calculateLeak()">
                        <i class="fas fa-calculator"></i> Рассчитать утечку
                    </button>
                    
                    <div class="time-selector">
                        <label>Период утечки:</label>
                        <select id="leak-period">
                            <option value="1">1 час</option>
                            <option value="24" selected>1 сутки</option>
                            <option value="168">1 неделя</option>
                            <option value="720">1 месяц</option>
                            <option value="8760">1 год</option>
                        </select>
                    </div>
                </div>
                
                <div class="leak-results">
                    <div class="result-card">
                        <h4><i class="fas fa-wind"></i> Мгновенный расход</h4>
                        <div class="result-value-large" id="leak-instant">0 м³/ч</div>
                        <p>Текущая скорость утечки</p>
                    </div>
                    
                    <div class="result-card">
                        <h4><i class="fas fa-clock"></i> За выбранный период</h4>
                        <div class="result-value-large" id="leak-period-volume">0 м³</div>
                        <p>Объем утечки</p>
                    </div>
                    
                    <div class="result-card">
                        <h4><i class="fas fa-money-bill-wave"></i> Финансовые потери</h4>
                        <div class="result-value-large" id="leak-financial">0 ₽</div>
                        <p>При тарифе 420 ₽/м³</p>
                    </div>
                    
                    <div class="result-card">
                        <h4><i class="fas fa-bolt"></i> Режим истечения</h4>
                        <div class="result-value-large" id="leak-regime">-</div>
                        <p>Критический/докритический</p>
                    </div>
                </div>
                
                <div class="leak-details">
                    <h4><i class="fas fa-info-circle"></i> Детали расчета</h4>
                    <div class="details-grid">
                        <div class="detail-item">
                            <span>Площадь отверстия:</span>
                            <span id="leak-area">0 мм²</span>
                        </div>
                        <div class="detail-item">
                            <span>Скорость истечения:</span>
                            <span id="leak-velocity">0 м/с</span>
                        </div>
                        <div class="detail-item">
                            <span>Число Маха:</span>
                            <span id="leak-mach">0</span>
                        </div>
                        <div class="detail-item">
                            <span>Критическое отношение давлений:</span>
                            <span id="leak-critical-ratio">0.528</span>
                        </div>
                        <div class="detail-item">
                            <span>Фактическое отношение давлений:</span>
                            <span id="leak-actual-ratio">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="leak-simulation">
                    <h4><i class="fas fa-chart-line"></i> Динамика утечки</h4>
                    <div class="simulation-controls">
                        <button class="btn-small" onclick="startLeakSimulation()">
                            <i class="fas fa-play"></i> Запустить симуляцию
                        </button>
                        <button class="btn-small" onclick="stopLeakSimulation()">
                            <i class="fas fa-stop"></i> Остановить
                        </button>
                        <span class="simulation-time">Время: <span id="sim-time">0</span> ч</span>
                    </div>
                    <div class="chart-container">
                        <canvas id="leakChart"></canvas>
                    </div>
                </div>
                
                <div class="leak-response">
                    <h4><i class="fas fa-exclamation-triangle"></i> Рекомендации по ликвидации</h4>
                    <div class="response-actions">
                        <div class="action-card">
                            <h5><i class="fas fa-phone"></i> Немедленные действия</h5>
                            <ul>
                                <li>Оповестить диспетчерскую службу</li>
                                <li>Перекрыть ближайшие задвижки</li>
                                <li>Выставить оцепление</li>
                                <li>Исключить источники воспламенения</li>
                            </ul>
                        </div>
                        
                        <div class="action-card">
                            <h5><i class="fas fa-tools"></i> Ремонтные работы</h5>
                            <ul>
                                <li>Установка хомута</li>
                                <li>Замена участка трубы</li>
                                <li>Сварка дефектного участка</li>
                                <li>Нанесение полимерного покрытия</li>
                            </ul>
                        </div>
                        
                        <div class="action-card">
                            <h5><i class="fas fa-shield-alt"></i> Профилактика</h5>
                            <ul>
                                <li>Регулярный осмотр</li>
                                <li>Внутритрубная диагностика</li>
                                <li>Катодная защита</li>
                                <li>Контроль коррозии</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Вкладка операций -->
            <div id="pipeline-operations" class="tab-content">
                <h2><i class="fas fa-tools"></i> Технологические операции</h2>
                
                <div class="operations-grid">
                    <div class="operation-card" onclick="openOperation('cleaning')">
                        <div class="operation-icon">
                            <i class="fas fa-broom"></i>
                        </div>
                        <h4>Очистка участков МГ</h4>
                        <p>Расчет расхода газа на продувку</p>
                    </div>
                    
                    <div class="operation-card" onclick="openOperation('hydrate')">
                        <div class="operation-icon">
                            <i class="fas fa-snowflake"></i>
                        </div>
                        <h4>Ликвидация гидратных пробок</h4>
                        <p>Расход газа и ингибитора</p>
                    </div>
                    
                    <div class="operation-card" onclick="openOperation('zra')">
                        <div class="operation-icon">
                            <i class="fas fa-compress-arrows-alt"></i>
                        </div>
                        <h4>Техобслуживание ЗРА</h4>
                        <p>Перестановка задвижек</p>
                    </div>
                    
                    <div class="operation-card" onclick="openOperation('purge')">
                        <div class="operation-icon">
                            <i class="fas fa-wind"></i>
                        </div>
                        <h4>Продувка дренажей</h4>
                        <p>Расход на очистку дренажных систем</p>
                    </div>
                    
                    <div class="operation-card" onclick="openOperation('pigging')">
                        <div class="operation-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h4>Внутритрубная диагностика</h4>
                        <p>Расход на запуск очистного устройства</p>
                    </div>
                    
                    <div class="operation-card" onclick="openOperation('repair')">
                        <div class="operation-icon">
                            <i class="fas fa-hard-hat"></i>
                        </div>
                        <h4>Ремонтные работы</h4>
                        <p>Расход на стравливание и продувку</p>
                    </div>
                </div>
                
                <!-- Форма для очистки участков -->
                <div id="operation-cleaning" class="operation-form">
                    <h3><i class="fas fa-broom"></i> Очистка участков МГ</h3>
                    
                    <div class="input-group">
                        <label>Длина очищаемого участка, км:</label>
                        <input type="number" id="cleaning-length" value="10" step="0.1">
                    </div>
                    
                    <div class="input-group">
                        <label>Диаметр газопровода, мм:</label>
                        <input type="number" id="cleaning-diameter" value="720" step="1">
                    </div>
                    
                    <div class="input-group">
                        <label>Рабочее давление, МПа:</label>
                        <input type="number" id="cleaning-pressure" value="5.0" step="0.1">
                    </div>
                    
                    <div class="input-group">
                        <label>Метод очистки:</label>
                        <select id="cleaning-method">
                            <option value="pig">Очистным устройством (скребком)</option>
                            <option value="chemical">Химическая очистка</option>
                            <option value="mechanical">Механическая очистка</option>
                            <option value="combined">Комбинированный метод</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label>Количество продувок:</label>
                        <input type="number" id="cleaning-purges" value="3" min="1" max="10">
                        <div class="input-hint">
                            Обычно 2-3 продувки для полной очистки
                        </div>
                    </div>
                    
                    <button class="btn calculate-btn" onclick="calculateCleaning()">
                        <i class="fas fa-calculator"></i> Рассчитать расход газа
                    </button>
                    
                    <div class="result-card">
                        <div class="result-item">
                            <span>Объем участка:</span>
                            <span id="cleaning-volume">0 м³</span>
                        </div>
                        <div class="result-item">
                            <span>Расход газа на одну продувку:</span>
                            <span id="cleaning-gas-per-purge">0 м³</span>
                        </div>
                        <div class="result-item highlight">
                            <span>Общий расход газа:</span>
                            <span id="cleaning-total-gas">0 м³</span>
                        </div>
                        <div class="result-item">
                            <span>Время очистки:</span>
                            <span id="cleaning-time">0 ч</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Вкладка запаса газа -->
            <div id="pipeline-inventory" class="tab-content">
                <h2><i class="fas fa-box"></i> Запас газа в газопроводе</h2>
                
                <div class="inventory-methods">
                    <h3>Методы расчета:</h3>
                    <div class="method-buttons">
                        <button class="method-btn active" data-method="geometric">
                            <i class="fas fa-ruler"></i>
                            <span>Геометрический</span>
                        </button>
                        <button class="method-btn" data-method="integral">
                            <i class="fas fa-calculator"></i>
                            <span>Интегральный</span>
                        </button>
                        <button class="method-btn" data-method="dynamic">
                            <i class="fas fa-chart-line"></i>
                            <span>Динамический</span>
                        </button>
                    </div>
                </div>
                
                <div class="inventory-form">
                    <div class="input-section">
                        <h4>Параметры газопровода</h4>
                        
                        <div class="input-group">
                            <label>Длина участка, км:</label>
                            <input type="number" id="inv-length" value="50" step="0.1">
                        </div>
                        
                        <div class="input-group">
                            <label>Диаметр, мм:</label>
                            <input type="number" id="inv-diameter" value="720" step="1">
                        </div>
                        
                        <div class="input-group">
                            <label>Начальное давление, МПа:</label>
                            <input type="number" id="inv-p1" value="7.5" step="0.1">
                        </div>
                        
                        <div class="input-group">
                            <label>Конечное давление, МПа:</label>
                            <input type="number" id="inv-p2" value="4.0" step="0.1">
                        </div>
                    </div>
                    
                    <div class="input-section">
                        <h4>Параметры газа</h4>
                        
                        <div class="input-group">
                            <label>Средняя температура, К:</label>
                            <input type="number" id="inv-temp" value="293" step="0.1">
                        </div>
                        
                        <div class="input-group">
                            <label>Коэффициент сжимаемости:</label>
                            <input type="number" id="inv-z" value="0.95" step="0.01">
                        </div>
                        
                        <div class="input-group">
                            <label>Молярная масса, кг/кмоль:</label>
                            <input type="number" id="inv-molar-mass" value="16.8" step="0.1">
                        </div>
                    </div>
                </div>
                
                <button class="btn calculate-btn large" onclick="calculateInventory()">
                    <i class="fas fa-calculator"></i> Рассчитать запас газа
                </button>
                
                <div class="inventory-results">
                    <div class="result-card large">
                        <h4><i class="fas fa-gas-pump"></i> Запас газа в участке</h4>
                        <div class="result-value-extra" id="inventory-result">0</div>
                        <div class="result-unit">тыс. м³ (н.у.)</div>
                        <div class="result-subtitle">
                            <span>В рабочих условиях:</span>
                            <span id="inventory-working">0 тыс. м³</span>
                        </div>
                    </div>
                    
                    <div class="inventory-components">
                        <h4><i class="fas fa-cubes"></i> Составляющие запаса</h4>
                        <div class="components-grid">
                            <div class="component">
                                <span class="component-label">Геометрический объем:</span>
                                <span class="component-value" id="comp-volume">0 м³</span>
                            </div>
                            <div class="component">
                                <span class="component-label">Среднее давление:</span>
                                <span class="component-value" id="comp-avg-pressure">0 МПа</span>
                            </div>
                            <div class="component">
                                <span class="component-label">Плотность при рабочих условиях:</span>
                                <span class="component-value" id="comp-density">0 кг/м³</span>
                            </div>
                            <div class="component">
                                <span class="component-label">Масса газа:</span>
                                <span class="component-value" id="comp-mass">0 т</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="inventory-application">
                        <h4><i class="fas fa-lightbulb"></i> Практическое применение</h4>
                        <div class="application-items">
                            <div class="app-item">
                                <h5><i class="fas fa-balance-scale"></i> Учет газа</h5>
                                <p>Определение фактических остатков в газопроводах для балансовых расчетов</p>
                            </div>
                            <div class="app-item">
                                <h5><i class="fas fa-chart-line"></i> Оперативное планирование</h5>
                                <p>Использование буферной емкости газопровода для покрытия пиковых нагрузок</p>
                            </div>
                            <div class="app-item">
                                <h5><i class="fas fa-exclamation-triangle"></i> Аварийные ситуации</h5>
                                <p>Оценка объема газа, который необходимо стравить при аварийной остановке</p>
                            </div>
                            <div class="app-item">
                                <h5><i class="fas fa-money-bill-wave"></i> Финансовые расчеты</h5>
                                <p>Оценка стоимости газа, находящегося в газопроводе</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="inventory-sensitivity">
                    <h4><i class="fas fa-sliders-h"></i> Анализ чувствительности</h4>
                    <div class="sensitivity-controls">
                        <label>Изменение давления, %:</label>
                        <input type="range" id="pressure-sensitivity" min="-20" max="20" value="0">
                        <span id="pressure-sensitivity-value">0%</span>
                    </div>
                    
                    <div class="sensitivity-chart">
                        <canvas id="sensitivityChart"></canvas>
                    </div>
                    
                    <div class="sensitivity-results">
                        <div class="sensitivity-item">
                            <span>При изменении давления на <span id="pressure-change">0</span>%:</span>
                            <span>Запас газа: <span id="inventory-change">0</span> тыс. м³</span>
                        </div>
                        <div class="sensitivity-item">
                            <span>Изменение стоимости (<span id="price-per-m3">420</span> ₽/м³):</span>
                            <span><span id="cost-change">0</span> тыс. руб</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Панель сводки по трубопроводам -->
        <div class="pipeline-summary">
            <h3><i class="fas fa-clipboard-list"></i> Сводка по трубопроводу</h3>
            <div class="summary-grid">
                <div class="summary-item">
                    <span class="summary-label">Пропускная способность:</span>
                    <span class="summary-value" id="summary-capacity">0 млн м³/сут</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Скорость газа:</span>
                    <span class="summary-value" id="summary-velocity">0 м/с</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Запас газа:</span>
                    <span class="summary-value" id="summary-inventory">0 тыс. м³</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Удельные потери:</span>
                    <span class="summary-value" id="summary-losses">0 кПа/км</span>
                </div>
            </div>
            <div class="summary-actions">
                <button class="btn" onclick="generatePipelineReport()">
                    <i class="fas fa-file-pdf"></i> Отчет по трубопроводу
                </button>
                <button class="btn secondary" onclick="comparePipelines()">
                    <i class="fas fa-exchange-alt"></i> Сравнить
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>
</html>